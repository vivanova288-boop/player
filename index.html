<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Magic Audio Editor - Vivanova288 Edition</title>
    <style>
        :root { --gold: #FFD700; --dark: #1a1a1a; }
        body { font-family: 'Segoe UI', sans-serif; background: #2c3e50; color: white; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        #editor { width: 400px; background: var(--dark); padding: 25px; overflow-y: auto; border-right: 3px solid var(--gold); box-shadow: 10px 0 20px rgba(0,0,0,0.3); }
        .control-group { margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 15px; }
        label { display: block; font-size: 13px; color: var(--gold); margin-bottom: 8px; font-weight: bold; }
        input, textarea { width: 100%; background: #252525; border: 1px solid #444; color: white; padding: 8px; border-radius: 6px; box-sizing: border-box; }
        
        #preview-area { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: radial-gradient(circle, #34495e 0%, #2c3e50 100%); position: relative; }
        .code-output { width: 95%; height: 180px; background: #000; color: #FFD700; font-family: 'Consolas', monospace; padding: 12px; margin-top: 15px; white-space: pre-wrap; overflow-y: auto; font-size: 11px; border: 1px solid #444; }
        
        button { background: linear-gradient(135deg, #FFD700, #DAA520); border: none; padding: 12px; border-radius: 6px; cursor: pointer; font-weight: bold; color: #000; transition: 0.3s; }
        button:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4); }
        h2 { color: var(--gold); text-align: center; margin-top: 0; }
    </style>
</head>
<body>

<div id="editor">
    <h2>üé® Player Editor</h2>
    
    <div class="control-group">
        <label>–¶–≤–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π, –∑–æ–ª–æ—Ç–æ–π –∏ —Ç.–¥.)</label>
        <input type="color" id="mainColor" value="#5e35b1">
    </div>

    <div class="control-group">
        <label>–ü—É—Ç—å –∫ –æ–±–ª–æ–∂–∫–µ (–∏–∑ —Ç–≤–æ–µ–≥–æ —Ä–µ–ø–æ)</label>
        <input type="text" id="coverUrl" value="https://vivanova288-boop.github.io/player/cover.jpg">
    </div>

    <div class="control-group">
        <label>–°–ø–∏—Å–æ–∫ MP3 —Ñ–∞–π–ª–æ–≤ (–Ω–∞–∑–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
        <textarea id="fileNames" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: song1.mp3, track2.mp3">track1.mp3, track2.mp3</textarea>
        <small style="font-size: 11px; color: #888;">–ü—Ä–æ—Å—Ç–æ –≤–ø–∏—à–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ª–µ–∂–∞—Ç –≤ –ø–∞–ø–∫–µ <b>player</b></small>
    </div>

    <button onclick="generateCode()">üíé –°–ì–ï–ù–ï–†–ò–†–û–í–ê–¢–¨ –ö–û–î –î–õ–Ø GENIALLY</button>
    
    <div id="output-container" style="margin-top: 20px;">
        <label>–¢–≤–æ–π –∫–æ–¥ (–≤—Å—Ç–∞–≤—å –≤ Genially -> Insert -> Others):</label>
        <div class="code-output" id="finalCode"></div>
    </div>
</div>

<div id="preview-area">
    <div id="player-mount"></div>
</div>

<script>
function generateCode() {
    const color = document.getElementById('mainColor').value;
    const cover = document.getElementById('coverUrl').value;
    const repoBase = "https://raw.githubusercontent.com/vivanova288-boop/player/main/";
    const fileNames = document.getElementById('fileNames').value.split(',').map(t => t.trim());
    const tracksArray = fileNames.map(name => `'${repoBase}${name}'`).join(',');
    
    const playerHtml = `
<div class="genially-fixed-audio" style="width: 460px; height: 400px; overflow: hidden; display: flex; align-items: center; justify-content: center;">
    <style>
        #m-player { width: 420px; background: ${color}; border-radius: 20px; padding: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.6); color: white; transition: all 0.4s ease; font-family: sans-serif; position: relative; }
        #m-player.collapsed { width: 70px; height: 70px; padding: 0; border-radius: 50%; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .btn { cursor: pointer; transition: 0.2s; user-select: none; color: #FFD700; font-size: 26px; }
        .btn:hover { transform: scale(1.2); filter: brightness(1.2); }
        .vis { height: 6px; background: rgba(255,255,255,0.15); width: 100%; margin: 15px 0; border-radius: 3px; cursor: pointer; }
        #prog { height: 100%; background: #FFD700; width: 0%; border-radius: 3px; }
        .tts-inp { width: 100%; background: rgba(0,0,0,0.2); border: 1px solid #FFD700; border-radius: 6px; color: white; padding: 8px; font-size: 13px; outline: none; }
        #pl-box { display: none; margin-top: 15px; background: rgba(0,0,0,0.3); border-radius: 10px; padding: 10px; max-height: 80px; overflow-y: auto; font-size: 12px; }
    </style>

    <div id="m-player">
        <div id="m-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <span style="font-size: 10px; letter-spacing: 2px;">LIBRARY AUDIO</span>
                <span class="btn" onclick="toggleM()" style="font-size: 16px;">üåì</span>
            </div>

            <div style="display: flex; align-items: center; gap: 20px;">
                <div style="width: 100px; height: 100px; border-radius: 12px; background: url('${cover}') center/cover; box-shadow: 0 5px 15px rgba(0,0,0,0.4);"></div>
                <div>
                    <div id="t-name" style="font-size: 16px; font-weight: bold; margin-bottom: 10px; color: #FFD700;">Magic Lesson</div>
                    <div style="display: flex; gap: 15px; align-items: center;">
                        <span class="btn" onclick="p_prev()">‚èÆ</span>
                        <span class="btn" id="p_play" onclick="p_toggle()">‚ñ∂</span>
                        <span class="btn" onclick="p_next()">‚è≠</span>
                    </div>
                </div>
            </div>

            <div class="vis" onclick="p_seek(event)"><div id="prog"></div></div>

            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <span onclick="toggleL()" style="cursor: pointer; font-size: 12px; color: #FFD700;">üìú Playlist</span>
                <input type="range" min="0" max="1" step="0.1" value="0.5" style="width: 80px; accent-color: #FFD700;" oninput="p_vol(this.value)">
            </div>
            
            <div id="pl-box"></div>

            <div style="display: flex; gap: 8px;">
                <input type="text" id="p_tts" class="tts-inp" placeholder="English text...">
                <button onclick="p_speak()" style="width: 40px; background: #FFD700; border: none; border-radius: 6px; cursor: pointer;">üîä</button>
            </div>
        </div>
        <div id="m-mini" style="display: none; font-size: 35px; cursor: pointer;" onclick="toggleM()">üéµ</div>
    </div>

    <script>
        const p_tracks = [${tracksArray}];
        let p_cur = 0;
        let p_audio = new Audio(p_tracks[p_cur]);
        
        function p_toggle() {
            if (p_audio.paused) { p_audio.play(); document.getElementById('p_play').innerText = '‚è∏'; }
            else { p_audio.pause(); document.getElementById('p_play').innerText = '‚ñ∂'; }
        }

        function p_next() { p_cur = (p_cur + 1) % p_tracks.length; p_playTrack(p_cur); }
        function p_prev() { p_cur = (p_cur - 1 + p_tracks.length) % p_tracks.length; p_playTrack(p_cur); }

        function p_playTrack(i) {
            p_cur = i; p_audio.src = p_tracks[p_cur]; p_audio.play();
            document.getElementById('p_play').innerText = '‚è∏';
        }

        function p_vol(v) { p_audio.volume = v; }

        function p_speak() {
            const t = document.getElementById('p_tts').value;
            if (!t) return;
            const u = new SpeechSynthesisUtterance(t);
            u.lang = 'en-US'; u.rate = 0.8;
            window.speechSynthesis.speak(u);
        }

        function toggleL() {
            const b = document.getElementById('pl-box');
            b.style.display = b.style.display === 'block' ? 'none' : 'block';
            b.innerHTML = p_tracks.map((t, i) => \`<div onclick="p_playTrack(\${i})" style="padding: 5px; cursor: pointer; border-bottom: 1px solid rgba(255,255,255,0.1)">Track \${i+1}</div>\`).join('');
        }

        function toggleM() {
            const m = document.getElementById('m-player');
            const c = document.getElementById('m-content');
            const i = document.getElementById('m-mini');
            m.classList.toggle('collapsed');
            if(m.classList.contains('collapsed')) { c.style.display='none'; i.style.display='block'; }
            else { c.style.display='block'; i.style.display='none'; }
        }

        p_audio.ontimeupdate = () => {
            const p = (p_audio.currentTime / p_audio.duration) * 100;
            document.getElementById('prog').style.width = p + '%';
        };

        function p_seek(e) {
            const rect = e.currentTarget.getBoundingClientRect();
            p_audio.currentTime = ((e.clientX - rect.left) / rect.width) * p_audio.duration;
        }
    <\/script>
</div>`;

    document.getElementById('finalCode').innerText = playerHtml;
    document.getElementById('player-mount').innerHTML = playerHtml;
}
generateCode();
</script>
</body>
</html>
